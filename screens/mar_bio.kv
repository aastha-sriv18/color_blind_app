<MarBioScreen>:
    name: "mar_bio"

    MDBoxLayout:
        orientation: "vertical"
        
        MDScrollView:
            size_hint_y: 1
            do_scroll_y: True
            MDBoxLayout:

                orientation: "vertical"
                padding: [20,dp(20),20,dp(20)]
                size_hint_y: None
                adaptive_height: True
                spacing: dp(10)

                MDLabel:
                    padding: [10,dp(76),10,20]
                    text: "Upload an image to find out color test"
                    font_size: 22
                    color: "black"
                    halign: "center"
                    size_hint_y: None
                    height: 40

                MDFloatLayout:
                    MDRoundFlatIconButton:
                        text: "Open File Manager"
                        icon: "folder"
                        pos_hint: {"center_x": 0.5, "center_y": 0.5}
                        on_release: root.open_file_manager()

                MDRaisedButton:
                    id: test_drop_item
                    text: "Select Test Type"
                    pos_hint: {"center_x": 0.5, "center_y": 0.5}
                    on_release: root.show_test_menu()

                MDRaisedButton:
                    text: "Selected Test: None"
                    pos_hint: {"center_x": 0.5, "center_y": 0.5}
                    id: selected_test_btn

                MDLabel:
                    text: "Before You Begin\nTo ensure precise color detection and accurate analysis:\n•Place your test strip or sample on a plain background.\n•Use natural light or soft indoor lighting — avoid harsh glare or dim light\n•Keep the camera steady and centered on the test.\n•Make sure the test area is in focus and fills most of the frame.\n•Avoid shadows or reflections on the strip.\n•Avoid background distractions (hands, tables, or other objects)."
                    font_size: 22
                    color: "black"
                    halign: "center"
                    size_hint_y: None
                    height: 40

                Image:
                    source: root.image_path
                    allow_stretch: True
                    keep_ratio: True
                    size_hint_y: 0.7

                MDLabel:
                    text: root.color_info
                    halign: "center"
                    font_size: 20
                    theme_text_color: "Primary"
                    size_hint_y: None
                    height: 60

                MDRaisedButton:
                    text: "Generate Analysis"
                    size_hint_y: None
                    height: 50
                    pos_hint: {"center_x": 0.5}
                    on_release: root.generate_analysis()
